\section{\lr{Basic OMP}}
\begin{enumerate}
    \item \begin{itemize}
        \item \lr{static}: در این حالت به هر کدام از ترد‌ها مقادیری که باید بر روی آنها
        \lr{iteration}
        انجام دهند مشخص می‌شوند.
        \item \lr{dynamic}: در ابتدا به هرد ترد یک \lr{iteration}
        از حلقه‌ی اصلی داده می‌شود. در صورتی که تردی کارش را انجام دهد به صورت داینامیک مقدار بعدی
        \lr{iteration}
        را می‌گیرد.
        \item \lr{guided}: در ابتدا مثل \lr{static} است.
        یعنی به صورت مساوی
        \lr{iteration}ها
        را بین ترد‌ها تقسیم می‌کند. ولی اگر کار یک ترد زودتر تمام شود سعی می‌کند که کار‌های ترد‌های دیگر را بگیرد.
    \end{itemize}
    \item در ابتدا از \lr{makefile} تمرین یک استفاده کردم که تمامی کد‌های مورد نظر را یکجا کامپایل کنم.
    سپس به کمک
    \lr{bash}
    یک اسکریپت نوشتم که برنامه را به تعداد ده بار اجرا کند و میانگین زمان اجرا را بدست آورد. یک نکته‌ی خیلی خیلی مهم در کامپایل کردن این است که از
    \codeword{-O3}
    استفاده نکنیم. در صورت استفاده از این پرچم عملیات جمع اعداد ما به صورت
    \lr{O(1)}
    و فقط با یک ضرب انجام می‌شود. نتیجه‌ی ران‌ها به صورت
    زیر است:
    \begin{latin}
        \centering
        \begin{tabular}{|c|c|c|c|}
            \hline
            & Static & Dynamic & Guided\\
            \hline
            Code A & 0.61789 & 0.892897 & 0.58524 \\
            \hline
            Code B & 1822.85 & 1630.18 & 1624.01 \\
            \hline
            Code C & 2211.31 & 1615.35 & 1639.59 \\
            \hline
        \end{tabular}
    \end{latin}
    در برنامه‌ی اول هر کدام از ترد‌ها کار برابری انجام می‌دهند پس انتظار داریم که
    \lr{static}
    خیلی بهتر از
    \lr{dynamic}
    باشد که همین طور نیز است چرا که سربار
    \lr{dynamic}
    خیلی زیاد است!
    از طرفی متوجه می‌شویم که
    \lr{guided}
    کمی بهتر از
    \lr{static}
    است که این کمی برای من عجیب است. چرا که با اینکه در ابتدا
    \lr{guided}
    مثل
    \lr{static}
    است ولی بالاخره یک سربار بیشتری نسبت به آن دارد و باید سرعت آن کمی بدتر می‌شد.

    برای کد
    \lr{B}
    که زمان اجرای هر کدام از
    \lr{iteration}ها
    متفاوت است، متوجه می‌شویم که
    \lr{dynamic} و \lr{guided}
    عملکرد بهتری نسبت به
    \lr{static}
    دارند.

    در کد آخر همزمان در حال جمع زدن اعداد تصادفی، در حال حساب کردن یک جمع دیگر نیز هستیم. در این حالت
    باز هم متوجه می‌شویم که
    \lr{dynamic} و \lr{guided}
    به شدت بهتر از
    \lr{static}
    هستند.
\end{enumerate}
