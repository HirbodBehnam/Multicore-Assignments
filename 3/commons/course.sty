\usepackage{graphicx}
\usepackage{float}
\usepackage[svgnames]{xcolor} 
\usepackage{fancyhdr}
\usepackage{tocloft}
\usepackage[hidelinks]{hyperref}
\usepackage[shortlabels]{enumitem}
\usepackage[many]{tcolorbox}
\usepackage{listings }
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage{afterpage}
\usepackage{amssymb}
\usepackage{pdflscape}
\usepackage{textcomp}
\usepackage{xecolor}
\usepackage{rotating}
\usepackage{xepersian}
\usepackage[T1]{fontenc}
\usepackage{tikz}
\usepackage[utf8]{inputenc}
\usepackage{PTSerif} 
\usepackage{seqsplit}
\usepackage{changepage}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{sectsty}
\usepackage{cancel}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{blanchedalmond}{rgb}{1.0, 0.92, 0.8}
\definecolor{brilliantlavender}{rgb}{0.96, 0.73, 1.0}
\settextfont[Scale=1]{XB Niloofar}
\lstdefinelanguage[mips]{Assembler}{%
  % so listings can detect directives and register names
  alsoletter={.\$},
  % strings, characters, and comments
  morestring=[b]",
  morestring=[b]',
  morecomment=[l]\#,
  % instructions
  morekeywords={[1]MOVI, LEA, LD, MUL, ADD, RSHFA, ST, BRGEZ,
  	SET, VLD, VMUL, VADD, VRSHFA, VST},
  % assembler directives
  morekeywords={[2].align,.ascii,.asciiz,.byte,.data,.double,.extern,%
    .float,.globl,.half,.kdata,.ktext,.set,.space,.text,.word},
  % register names
  morekeywords={[3]\$0,\$1,\$2,\$3,\$4,\$5,\$6,\$7,\$8,\$9,\$10,\$11,%
    \$12,\$13,\$14,\$15,\$16,\$17,\$18,\$19,\$20,\$21,\$22,\$23,\$24,%
    \$25,\$26,\$27,\$28,\$29,\$30,\$31,%
    \$zero,\$at,\$v0,\$v1,\$a0,\$a1,\$a2,\$a3,\$t0,\$t1,\$t2,\$t3,\$t4,
    \$t5,\$t6,\$t7,\$s0,\$s1,\$s2,\$s3,\$s4,\$s5,\$s6,\$s7,\$t8,\$t9,%
    \$k0,\$k1,\$gp,\$sp,\$fp,\$ra,R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15,
	Vst, Vln, V0, V1},
}[strings,comments,keywords]


\definecolor{CommentGreen}{rgb}{0,.6,0}
\lstdefinestyle{mystyle}{
	 language=[mips]Assembler
	 backgroundcolor=\color{backcolour},   
	 commentstyle=\color{codegreen},
	 keywordstyle=[1]\color{blue},    % instructions
     keywordstyle=[2]\color{magenta}, % directives
     keywordstyle=[3]\color{red}
	 numberstyle=\tiny\color{codegray},
	 commentstyle=\color{CommentGreen}
	 stringstyle=\color{codepurple},
	 basicstyle=\ttfamily\normalsize,
	 breakatwhitespace=false,         
	 breaklines=true,                 
	 captionpos=b,                    
	 keepspaces=true,                 
	 numbers=left,                    
	 numbersep=5pt,                  
	 showspaces=false,                
	 showstringspaces=false,
	 showtabs=false,                  
	 tabsize=2
}

\lstset{
	backgroundcolor=\color{backcolour},
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny\color{codegray},
   language=[mips]Assembler,
   escapechar=@, % include LaTeX code between `@' characters
   keepspaces,   % needed to preserve spacing with lstinline
   basicstyle=\footnotesize\ttfamily\bfseries,
   commentstyle=\color{CommentGreen},
   stringstyle=\color{cyan},
   showstringspaces=false,
   keywordstyle=[1]\color{blue},    % instructions
   keywordstyle=[2]\color{magenta}, % directives
   keywordstyle=[3]\color{red},     % registers
   breakatwhitespace=false,         
	 breaklines=true,                 
	 captionpos=b,             
	 numbers=left,                    
	 numbersep=5pt,                  
	 showspaces=false,                
	 showstringspaces=false,
	 showtabs=false,                  
	 tabsize=2
 }
\newcommand{\codesample}[1]{
	\LTR
	\begin{latin}
		\lstinputlisting{#1}
	\end{latin}
	\RTL
}
\newcommand{\samplebox}[1]{
	\begin{tcolorbox}[breakable,boxrule=0pt]
    \begin{latin}
        #1
    \end{latin}
    \end{tcolorbox}
	\vspace{0.2cm}
	\noindent
}
\newcommand{\printheader}[0]{
	\thispagestyle{fancy}
	\fancyhf{}
	\fancyfoot{}
	\cfoot{\thepage}
	\lhead{99171333}
	\rhead{هیربد بهنام}
	\chead{تمرین 3 چند هسته‌ای}
	\renewcommand{\headrulewidth}{2pt}
}
\newcommand{\smalltitle}[1] {
	\noindent \textbf{#1}
}
\newcommand{\codeword}[1] {
	\lr{\texttt{\textcolor{blue}{#1}}}
}
\newcommand{\link}[2]{\href{#1}{\textcolor{blue}{#2}}}